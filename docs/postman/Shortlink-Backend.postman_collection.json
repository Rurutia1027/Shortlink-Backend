{
  "info": {
    "name": "Shortlink Backend (Admin + Shortlink) API",
    "description": "Generated from admin & shortlink exposed controllers.\n\nDefault local ports:\n- admin: 8082\n- shortlink: 8081\n\nNotes:\n- Some admin endpoints currently require a working UserContext resolution (token -> user) to succeed (e.g., Group endpoints). Those requests are included but may fail until Redis/JWT/Spring Security is wired.\n- Some user endpoints (check-login/logout) are currently TODO/pending Redis session implementation.\n",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Admin - Actuator Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_base_url}}/api/admin/actuator/health",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "actuator",
                "health"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Shortlink - Actuator Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/actuator/health",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "actuator",
                "health"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin - User",
      "item": [
        {
          "name": "Register (POST /api/shortlink/admin/v1/user)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.environment.set('admin_username', 'postman_user_' + Date.now());",
                  "if (!pm.environment.get('admin_password')) {",
                  "  pm.environment.set('admin_password', '123456');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{admin_username}}\",\n  \"password\": \"{{admin_password}}\",\n  \"realName\": \"Postman User\",\n  \"phone\": \"18800000000\",\n  \"mail\": \"postman@example.com\"\n}"
            },
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/user",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "user"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('HTTP 200', function () { pm.response.to.have.status(200); });",
                  "let json = pm.response.json();",
                  "pm.test('Result code is 0', function () { pm.expect(json.code).to.eql('0'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Has Username (GET /api/shortlink/admin/v1/user/has-username)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/user/has-username?username={{admin_username}}",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "user",
                "has-username"
              ],
              "query": [
                {
                  "key": "username",
                  "value": "{{admin_username}}"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('HTTP 200', function () { pm.response.to.have.status(200); });",
                  "let json = pm.response.json();",
                  "pm.test('Result code is 0', function () { pm.expect(json.code).to.eql('0'); });",
                  "pm.test('data is boolean', function () { pm.expect(typeof json.data).to.eql('boolean'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User (GET /api/shortlink/admin/v1/user/{username})",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/user/{{admin_username}}",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "user",
                "{{admin_username}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('HTTP 200', function () { pm.response.to.have.status(200); });",
                  "let json = pm.response.json();",
                  "pm.test('Result code is 0', function () { pm.expect(json.code).to.eql('0'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Login (POST /api/shortlink/admin/v1/user/login)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{admin_username}}\",\n  \"password\": \"{{admin_password}}\"\n}"
            },
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/user/login",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "user",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('HTTP 200', function () { pm.response.to.have.status(200); });",
                  "let json = pm.response.json();",
                  "pm.test('Result code is 0', function () { pm.expect(json.code).to.eql('0'); });",
                  "if (json && json.data && json.data.token) {",
                  "  pm.environment.set('admin_token', json.data.token);",
                  "}",
                  "pm.test('token exists', function () { pm.expect(pm.environment.get('admin_token')).to.be.ok; });"
                ]
              }
            }
          ]
        },
        {
          "name": "Check Login (GET /api/shortlink/admin/v1/user/check-login) [Pending Redis]",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/user/check-login?username={{admin_username}}&token={{admin_token}}",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "user",
                "check-login"
              ],
              "query": [
                {
                  "key": "username",
                  "value": "{{admin_username}}"
                },
                {
                  "key": "token",
                  "value": "{{admin_token}}"
                }
              ]
            }
          }
        },
        {
          "name": "Logout (DELETE /api/shortlink/admin/v1/user/logout) [Pending Redis]",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/user/logout?username={{admin_username}}&token={{admin_token}}",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "user",
                "logout"
              ],
              "query": [
                {
                  "key": "username",
                  "value": "{{admin_username}}"
                },
                {
                  "key": "token",
                  "value": "{{admin_token}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Admin -> Shortlink Proxy",
      "item": [
        {
          "name": "Create Shortlink via Admin (POST /api/shortlink/admin/v1/create)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"domain\": \"{{domain}}\",\n  \"originUrl\": \"{{origin_url}}\",\n  \"gid\": \"{{gid}}\",\n  \"createdType\": 0,\n  \"validDateType\": 0,\n  \"validDate\": \"2026-01-01 00:00:00\",\n  \"describe\": \"Created via admin proxy\"\n}"
            },
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/create",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "create"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('HTTP 200', function () { pm.response.to.have.status(200); });",
                  "let json = pm.response.json();",
                  "pm.test('Result code is 0', function () { pm.expect(json.code).to.eql('0'); });",
                  "if (json && json.data && json.data.fullShortUrl) {",
                  "  pm.environment.set('full_short_url', json.data.fullShortUrl);",
                  "  pm.environment.set('gid', json.data.gid || pm.environment.get('gid'));",
                  "}",
                  "pm.test('fullShortUrl exists', function () { pm.expect(pm.environment.get('full_short_url')).to.be.ok; });"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Shortlink via Admin (PUT /api/shortlink/admin/v1/update)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"originUrl\": \"{{origin_url}}\",\n  \"fullShortUrl\": \"{{full_short_url}}\",\n  \"originGid\": \"{{gid}}\",\n  \"gid\": \"{{gid}}\",\n  \"validDateType\": 0,\n  \"validDate\": \"2026-01-01 00:00:00\",\n  \"describe\": \"Updated via admin proxy\"\n}"
            },
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/update",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "update"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('HTTP 200', function () { pm.response.to.have.status(200); });",
                  "let json = pm.response.json();",
                  "pm.test('Result code is 0', function () { pm.expect(json.code).to.eql('0'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Page Shortlinks via Admin (GET /api/shortlink/admin/v1/page)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/page?gid={{gid}}&orderTag={{order_tag}}&pageNo=1&pageSize=10",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "page"
              ],
              "query": [
                {
                  "key": "gid",
                  "value": "{{gid}}"
                },
                {
                  "key": "orderTag",
                  "value": "{{order_tag}}"
                },
                {
                  "key": "pageNo",
                  "value": "1"
                },
                {
                  "key": "pageSize",
                  "value": "10"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Group (requires UserContext wiring)",
      "item": [
        {
          "name": "Create Group (POST /api/shortlink/admin/v1/group) [Requires UserContext]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"postman-group\"\n}"
            },
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/group",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "group"
              ]
            }
          }
        },
        {
          "name": "List Groups (GET /api/shortlink/admin/v1/group) [Requires UserContext]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{admin_base_url}}/api/shortlink/admin/v1/group",
              "host": [
                "{{admin_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "admin",
                "v1",
                "group"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Shortlink Service",
      "item": [
        {
          "name": "Create Shortlink (POST /api/shortlink/v1/links/create)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"domain\": \"{{domain}}\",\n  \"originUrl\": \"{{origin_url}}\",\n  \"gid\": \"{{gid}}\",\n  \"createdType\": 0,\n  \"validDateType\": 0,\n  \"validDate\": \"2026-01-01 00:00:00\",\n  \"describe\": \"Created via shortlink service\"\n}"
            },
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/links/create",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "links",
                "create"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('HTTP 200', function () { pm.response.to.have.status(200); });",
                  "let json = pm.response.json();",
                  "pm.test('Result code is 0', function () { pm.expect(json.code).to.eql('0'); });",
                  "if (json && json.data && json.data.fullShortUrl) {",
                  "  pm.environment.set('full_short_url', json.data.fullShortUrl);",
                  "  pm.environment.set('gid', json.data.gid || pm.environment.get('gid'));",
                  "}",
                  "pm.test('fullShortUrl exists', function () { pm.expect(pm.environment.get('full_short_url')).to.be.ok; });"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Shortlink (PUT /api/shortlink/v1/links/update)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"originUrl\": \"{{origin_url}}\",\n  \"fullShortUrl\": \"{{full_short_url}}\",\n  \"originGid\": \"{{gid}}\",\n  \"gid\": \"{{gid}}\",\n  \"validDateType\": 0,\n  \"validDate\": \"2026-01-01 00:00:00\",\n  \"describe\": \"Updated via shortlink service\"\n}"
            },
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/links/update",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "links",
                "update"
              ]
            }
          }
        },
        {
          "name": "Page Shortlinks (POST /api/shortlink/v1/links/page)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gid\": \"{{gid}}\",\n  \"orderTag\": \"{{order_tag}}\",\n  \"pageNo\": 1,\n  \"pageSize\": 10\n}"
            },
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/links/page",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "links",
                "page"
              ]
            }
          }
        },
        {
          "name": "Group Count (GET /api/shortlink/v1/links/gcount)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/links/gcount?groupIds={{gid}}",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "links",
                "gcount"
              ],
              "query": [
                {
                  "key": "groupIds",
                  "value": "{{gid}}"
                }
              ]
            }
          }
        },
        {
          "name": "URL Title (GET /api/shortlink/v1/title?url=...)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/title?url={{origin_url}}",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "title"
              ],
              "query": [
                {
                  "key": "url",
                  "value": "{{origin_url}}"
                }
              ]
            }
          }
        },
        {
          "name": "Trash - Save (POST /api/shortlink/v1/trash/save)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gid\": \"{{gid}}\",\n  \"fullShortUrl\": \"{{full_short_url}}\"\n}"
            },
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/trash/save",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "trash",
                "save"
              ]
            }
          }
        },
        {
          "name": "Trash - List (GET /api/shortlink/v1/trash/list)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/trash/list?pageNum=1&pageSize=20",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "trash",
                "list"
              ],
              "query": [
                {
                  "key": "pageNum",
                  "value": "1"
                },
                {
                  "key": "pageSize",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Trash - Recover (PUT /api/shortlink/v1/trash/recover)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gid\": \"{{gid}}\",\n  \"fullShortUrl\": \"{{full_short_url}}\"\n}"
            },
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/trash/recover",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "trash",
                "recover"
              ]
            }
          }
        },
        {
          "name": "Trash - Remove Permanently (DELETE /api/shortlink/v1/trash/remove)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gid\": \"{{gid}}\",\n  \"fullShortUrl\": \"{{full_short_url}}\"\n}"
            },
            "url": {
              "raw": "{{shortlink_base_url}}/api/shortlink/v1/trash/remove",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "shortlink",
                "v1",
                "trash",
                "remove"
              ]
            }
          }
        },
        {
          "name": "Error - Shortlink Not Found (GET /api/errors/shortlink-not-found)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{shortlink_base_url}}/api/errors/shortlink-not-found",
              "host": [
                "{{shortlink_base_url}}"
              ],
              "path": [
                "api",
                "errors",
                "shortlink-not-found"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('HTTP 404', function () { pm.response.to.have.status(404); });",
                  "let json = pm.response.json();",
                  "pm.test('code is SHORT_LINK_NOT_FOUND', function () { pm.expect(json.code).to.eql('SHORT_LINK_NOT_FOUND'); });"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
